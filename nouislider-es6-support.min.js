"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var _nouislider=require("nouislider"),_nouislider2=_interopRequireDefault(_nouislider),directive=angular.module("ya.nouislider",[]);directive.value("yaNoUiSliderConfig",{}),directive.directive("yaNoUiSlider",["$timeout","$log","yaNoUiSliderConfig",function(i,e,r){function n(i){return angular.isArray(i)?i:[i]}function t(i){return n(i).slice()}function a(i,e){return i=n(i),e=n(e),i[0]===e[0]&&i[1]===e[1]}function o(i,e){for(var r=Object.keys(i),n=-1,t=r.length,a={};++n<t;){var o=r[n];o!==e&&(a[o]=i[o])}return a}return{restrict:"A",require:"yaNoUiSlider",scope:{yaNoUiSlider:"=",yaNoUiSliderDisabled:"=",yaNoUiSliderHandle1Disabled:"=",yaNoUiSliderHandle2Disabled:"=",yaNoUiSliderSlideDebounce:"@"},controller:["$scope","$element","$attrs",function(n,l,d){function u(i,e,r){e?i.setAttribute("disabled",!0):i.removeAttribute("disabled")}function s(){U.$destroy(),f.off("slide change update slide"),f.destroy(),i.cancel(N)}function c(){function o(i){var e=t(i);a(e,d)||(d=e,n.$applyAsync(function(){angular.isArray(i)?angular.isArray(n.yaNoUiSlider.start)?(n.yaNoUiSlider.start[0]=i[0],n.yaNoUiSlider.start[1]=i[1]):n.yaNoUiSlider.start=i[0]:n.yaNoUiSlider.start=i}))}U=n.$new();var l=angular.extend({},r,n.yaNoUiSlider),d=t(l.start);l.start=t(l.start),_nouislider2.default.create(v,l),S=v.getElementsByClassName("noUi-origin"),f=v.noUiSlider,U.$watch(function(){var i=n.yaNoUiSlider.start;return a(i,d)||(d=t(i),f.set(t(i))),d}),angular.forEach(h,function(e){f.on(e+".internal",function(r,n,t){"slide"===e&&b?(i.cancel(N),N=i(function(){o(t)},b)):o(t)})}),angular.forEach($,function(i,e){f.on(e+".noUiSlider",function(){var e=Array.prototype.slice.call(arguments),r=this;n.$applyAsync(function(){i.apply(r,e)})})}),U.$watch("yaNoUiSliderDisabled",u.bind(void 0,v)),U.$watch("yaNoUiSliderHandle1Disabled",u.bind(void 0,S[0])),U.$watch("yaNoUiSliderHandle2Disabled",function(i,r){if(i){if(!S[1])return e.warn("Warning: attempt to toggle disabled state of second handle using ya-no-ui-slider-handle2-disabled attribute in one-handle slider, nouislider-angular is ignoring such call.");u(S[1],i,r)}})}function y(){n.$watch(function(){return o(n.yaNoUiSlider,"start")},function(){f&&s(),c()},!0),n.$on("$destroy",s)}var f,S,U,N,g=this,v=l[0],$=n.$parent.$eval(d.yaNoUiSliderEvents),b=n.yaNoUiSliderSlideDebounce||0,h=b&&"Infinity"===b?["change"]:["change","slide"];g.getNoUiSlider=function(){return f};var p=n.$watch("yaNoUiSlider",function(i){i&&(p(),y())})}]}}]),module.exports=directive;