"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var _nouislider=require("nouislider"),_nouislider2=_interopRequireDefault(_nouislider),directive=angular.module("ya.nouislider",[]),$noUiSliderInstance=void 0;directive.value("yaNoUiSliderConfig",{}),directive.service("$noUiSlider",function(){this.prototype.getInstance=function(){return $noUiSliderInstance}})(),directive.directive("yaNoUiSlider",["$timeout","$log","yaNoUiSliderConfig",function(i,e,n){function r(i){return angular.isArray(i)?i:[i]}function t(i){return r(i).slice()}function a(i,e){return i=r(i),e=r(e),i[0]===e[0]&&i[1]===e[1]}function o(i,e){for(var n=Object.keys(i),r=-1,t=n.length,a={};++r<t;){var o=n[r];o!==e&&(a[o]=i[o])}return a}return{restrict:"A",require:"yaNoUiSlider",scope:{yaNoUiSlider:"=",yaNoUiSliderDisabled:"=",yaNoUiSliderHandle1Disabled:"=",yaNoUiSliderHandle2Disabled:"=",yaNoUiSliderSlideDebounce:"@"},controller:["$scope","$element","$attrs",function(r,l,d){function u(i,e,n){e?i.setAttribute("disabled",!0):i.removeAttribute("disabled")}function s(){U.$destroy(),y.off("slide change update slide"),y.destroy(),i.cancel(g)}function c(){function o(i){var e=t(i);a(e,d)||(d=e,r.$applyAsync(function(){angular.isArray(i)?angular.isArray(r.yaNoUiSlider.start)?(r.yaNoUiSlider.start[0]=i[0],r.yaNoUiSlider.start[1]=i[1]):r.yaNoUiSlider.start=i[0]:r.yaNoUiSlider.start=i}))}U=r.$new();var l=angular.extend({},n,r.yaNoUiSlider),d=t(l.start);l.start=t(l.start),_nouislider2.default.create(v,l),S=v.getElementsByClassName("noUi-origin"),y=v.noUiSlider,$noUiSliderInstance=y,U.$watch(function(){var i=r.yaNoUiSlider.start;return a(i,d)||(d=t(i),y.set(t(i))),d}),angular.forEach(b,function(e){y.on(e+".internal",function(n,r,t){"slide"===e&&h?(i.cancel(g),g=i(function(){o(t)},h)):o(t)})}),angular.forEach($,function(i,e){y.on(e+".noUiSlider",function(){var e=Array.prototype.slice.call(arguments),n=this;r.$applyAsync(function(){i.apply(n,e)})})}),U.$watch("yaNoUiSliderDisabled",u.bind(void 0,v)),U.$watch("yaNoUiSliderHandle1Disabled",u.bind(void 0,S[0])),U.$watch("yaNoUiSliderHandle2Disabled",function(i,n){if(i){if(!S[1])return e.warn("Warning: attempt to toggle disabled state of second handle using ya-no-ui-slider-handle2-disabled attribute in one-handle slider, nouislider-angular is ignoring such call.");u(S[1],i,n)}})}function f(){r.$watch(function(){return o(r.yaNoUiSlider,"start")},function(){y&&s(),c()},!0),r.$on("$destroy",s)}var y,S,U,g,N=this,v=l[0],$=r.$parent.$eval(d.yaNoUiSliderEvents),h=r.yaNoUiSliderSlideDebounce||0,b=h&&"Infinity"===h?["change"]:["change","slide"];N.getNoUiSlider=function(){return y};var p=r.$watch("yaNoUiSlider",function(i){i&&(p(),f())})}]}}]),module.exports=directive;